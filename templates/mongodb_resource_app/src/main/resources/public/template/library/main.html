<div class="row" ng-controller="LibraryController">
	<div class="row">
		<app-title>
			<h1 class="cell"><a data-reload>${APPNAME}</a></h1>
		</app-title>

		<div class="cell right-magnet zero-mobile" workflow="${APPNAME.toLowerCase()}.create">
			<button ng-click="lightbox('new')" class="right-magnet">
				<i18n>${APPNAME.toLowerCase()}.create</i18n>
			</button>
		</div>
	</div>

	<div class="row rigid-grid">
		<section class="four cell">
			<nav class="vertical" side-nav>
				<ul>
					<li>
                        <a 
                           ng-class="{ selected: currentFolder.name === 'root', opened: root.contains(currentFolder) }"
                           ng-click="openRoot()">
                            <i class="arrow" ng-if="root.children.length"></i>
                            <i18n>${APPNAME.toLowerCase()}.root</i18n></a>
                    </li>
					<li>
                        <a 
							ng-click="openTrash()"
							ng-class="{ selected: currentFolder.name === 'trash' }">
                            <i18n>folder.trash</i18n>
                        </a>
                    </li>
				</ul>
			</nav>
		</section>
		<section class="margin-four">
            <container template="library/folder-content"></container>
	    </section>
    </div>

	<lightbox show="lightboxes.new" on-close="lightbox('new')">
        <div ng-if="lightboxes.new">
            <container template="library/properties"></container>
        </div>
	</lightbox>

    <div ng-if="lightboxes.share">
        <lightbox show="lightboxes.share">
            <share-panel resources="currentFolder.selection"></share-panel>
        </lightbox>
    </div>

    <lightbox show="lightboxes.confirmRemove">
        <h2><i18n>remove</i18n></h2>

        <p><i18n>remove.confirm</i18n></p>

        <div class="row">
            <button class="right-magnet" ng-click="removeSelection()">
                <i18n>remove</i18n>
            </button>
            <button class="cancel right-magnet" type="button" ng-click="lightbox('confirmRemove')">
                <i18n>cancel</i18n>
            </button>
        </div>
    </lightbox>

    <container template="library/toaster"></container>
</div>
